{% extends "base.html" %}
{% block left_column %}
    <div class="page-header">
        <h1>settings</h1>
    </div>
    <form action="{{ url_for('change_password') }}" method=post class='vine-form'>
        <legend>Change XMPP/Jabber Password</legend>
        <p>
            When you change your password here, you'll also need to change it in all of the chat clients you use.
        </p>
        <p>
            If you prefer, you can change your password from the account settings menu in most clients.
        </p>
        <p>
            (This website uses Twitter to sign in, so you don't need to use the password to sign in here.)
        </p>
        {{ form.hidden_tag() }}
        <label><b>password</b></label>
        {{ form.password }}
        <label><b>confirm password</b></label>
        {{ form.confirm }}
        <input class='btn btn-success' type='submit' value='save only'>
        <p class="centered">
            <strong>or</strong>
        </p>
        <input class='btn btn-success' type='submit' onClick='return launchDemoClient("{{ user }}", $("#password").val(), $("#confirm").val());' value='save and launch demo client'>
        <p>
            The web-based demo client opens in a new window, so be sure to have <strong>popups enabled</strong>. It needs your password to sign in, so, for security reasons, you can only use right after changing your password here.
        </p>
        <p>
            (<a href="https://github.com/lehrblogger/JWChat">JWChat</a> is an open source project that works out-of-the-box with XMPP services like Vine.IM, so it was easy to get working. We'll build a proper web client soon!)
        </p>
    </form>
    <p>
        Or <a href='{{ url_for('settings') }}'><b>change your email address?</b></a>
    </p>
{% endblock %}
{% block script %}
    <script src="/static/jwchat/config.js" language="JavaScript1.2"></script>
    <script src="/static/jwchat/browsercheck.js" language="JavaScript1.2"></script>
    <script src="/static/jwchat/shared.js" language="JavaScript1.2"></script>
    <script src="/static/js/demo.js" language="JavaScript"></script>
{% endblock %}
